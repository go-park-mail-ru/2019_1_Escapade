################################################################
# Consul Catalog configuration backend
################################################################

# Enable Consul Catalog configuration backend.
[consulCatalog]
endpoint = "consul:8500"
exposedByDefault = false
prefix = "traefik"

[metrics]
  [metrics.prometheus]
    buckets = [0.1,0.3,1.2,5.0]
    addServicesLabels = true

[forwardingTimeouts]
    dialTimeout = "10s"

[docker]
  endpoint = "unix:///var/run/docker.sock"
  watch = true
  exposedbydefault = false

[entryPoints]
  [entryPoints.http]
    address = ":80"
    [entryPoints.http.transport]
      [entryPoints.http.transport.lifeCycle]
        requestAcceptGraceTimeout = 42
        graceTimeOut = 42
      [entryPoints.http.transport.respondingTimeouts]
        readTimeout = 42
        writeTimeout = 42
        idleTimeout = 42

[http]
  [http.routers]
    [http.routers.toDBr1]
      rule = "PathPrefix(`/aka/`)"
      service = "toDBs1"
  [http.services]
    [http.services.toDBs1.LoadBalancer]
      [[http.services.toDBs1.LoadBalancer.servers]]
        url = "http://api:3001"

[accessLog]
  format = "json"
  logLevel = "debug"
[log]
  format = "json"
  logLevel = "debug"

# Default frontEnd Rule for Consul services.
#
# The format is a Go Template with:
# - ".ServiceName", ".Domain" and ".Attributes" available
# - "getTag(name, tags, defaultValue)", "hasTag(name, tags)" and "getAttribute(name, tags, defaultValue)" functions are available
# - "getAttribute(...)" function uses prefixed tag names based on "prefix" value
#
# Optional
# Default: "Host:{{.ServiceName}}.{{.Domain}}"
#
#frontEndRule = "Host:{{.ServiceName}}.{{Domain}}"